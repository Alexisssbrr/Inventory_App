<div class="bg-cover">
    <div class="bg-sky-950 h-96">
        <div class="p-6 back">
            <img class="w-8" src="Assets/img/Arrow.svg" alt="">
        </div>
        <div class="flex flex-col items-center">
            <div class="">
                <img src="Assets/img/logo.png" alt="" class="">
            </div>
            <div class="pt-5">
                <h3 class="text-xl font-bold">Welcome Back, Sign In to Start</h3>
            </div>
        </div>
        <div class="flex flex-col items-center absolute w-full top-[350px] ">
            <div class="flex flex-col justify-center items-center bg-neutral-50 h-96 w-4/5 rounded-xl">
                <div class="w-4/5 pt-2">
                    <input
                        class="w-full h-14 rounded-xl text-xl font-bold bg-neutral-50 shadow-md shadow-gray-300 pl-2 outline-none text-black"
                        type="email" placeholder="Email" id="lemail">
                </div>
                <div class="w-4/5 pt-2 pb-2">
                    <input
                        class="w-full h-14 rounded-xl text-xl font-bold bg-neutral-50 shadow-md shadow-gray-300 pl-2 outline-none text-black"
                        type="password" placeholder="Password" id="lpassword">
                </div>
                <div class="w-4/5" id="login-button">
                    <button class="login-view bg-sky-950 h-14 w-full rounded-xl text-xl font-bold" type="button">Sign
                        In</button>
                </div>
                <div class="p-2">
                    <span class="text-black">OR</span>
                </div>
                <div class="w-4/5">
                    <button class="signup-view bg-sky-950 h-14 w-full rounded-xl text-xl font-bold" type="button">Sign
                        Up</button>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    document.getElementById('login-button').addEventListener('click', function (event) {
        event.preventDefault();

        const email = document.getElementById('lemail').value;
        const password = document.getElementById('lpassword').value;

        firebase.auth().signInWithEmailAndPassword(email, password)
            .then((userCredential) => {
                var user = userCredential.user;
                console.log('Login successful:', user);
                Swal.fire({
                    icon: 'success',
                    title: '¡Listo!',
                    text: 'Has iniciado sesión.',
                    timer: 2000,
                    showConfirmButton: false,
                    customClass: {
                        popup: 'bg-white border border-gray-200 rounded-md shadow-lg w-80',
                        title: 'font-semibold text-fc2 text-lg',
                        content: 'text-gray-700 text-sm',
                    }
                }).then(() => {
                    loadPartialView('homepage', document.querySelector('.app'), false);
                });
            })
            .catch((error) => {
                console.error('Login error:', error);
                let errorMessage = error.message;
                if (errorMessage.includes('auth/user-not-found')) {
                    errorMessage = 'Usuario no encontrado. Por favor, verifica tu correo electrónico.';
                } else if (errorMessage.includes('auth/wrong-password')) {
                    errorMessage = 'Contraseña incorrecta. Por favor, inténtalo de nuevo.';
                } else if (errorMessage.includes('auth/too-many-requests')) {
                    errorMessage = 'Demasiados intentos de inicio de sesión fallidos. Por favor, inténtalo más tarde.';
                } else if (errorMessage.includes('auth/invalid-email')) {
                    errorMessage = 'Correo electrónico inválido. Por favor, verifica tu correo electrónico.';
                }
                Swal.fire({
                    icon: 'error',
                    title: 'Error al iniciar sesión',
                    text: errorMessage,
                    customClass: {
                        popup: 'bg-white border border-red-300 rounded-md shadow-lg w-80',
                        title: 'font-semibold text-fc2 text-lg',
                        content: 'text-gray-700 text-sm',
                    }
                });
            });
    });
    document.querySelector('.signup-view').addEventListener('click', function () {
        loadPartialView('signup', document.querySelector('.app'), false);
    })
    document.querySelector('.back').addEventListener('click', function () {
        loadPartialView('start', document.querySelector('.app'), false);
    })
</script>